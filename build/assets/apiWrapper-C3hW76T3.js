import{Q as t}from"./index-CoFZVHxm.js";const y=async({url:u,method:p="GET",body:l=null,dispatch:r,successAction:f,notsuccessAction:n,loaderAction:s,navigate:g})=>{try{r==null||r(s(!0));const a=localStorage.getItem("token"),m={method:p,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:l?JSON.stringify(l):null},e=await fetch(u,m),o=await e.json();if(console.log("apiwrapper response",o),e.status===401||e.status===498)return t.warn(o.message,{autoClose:2100}),g("/logout");if(e.status===403&&t.warn(o.message,{autoClose:2100}),!e.ok){n==null||n(o);return}return f(o)}catch(a){console.error("ApiWrapper Error:",a),t.error(a.message||"An error occurred",{autoClose:2300})}finally{r==null||r(s(!1))}};export{y as a};
