var _=Object.defineProperty;var B=(t,e,s)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>(B(t,typeof e!="symbol"?e+"":e,s),s);import{R as T,j as n,u as V,a as W,r as g,d as f,s as z,m as H,F as q,I as J,S as K,M as w,B as S,V as G,b as Q,c as X,e as Z}from"./index-d01657a3.js";var E={exports:{}},ee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",te=ee,ne=te;function I(){}function L(){}L.resetWarningCache=I;var se=function(){function t(r,i,a,o,d,l){if(l!==ne){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:L,resetWarningCache:I};return s.PropTypes=s,s};E.exports=se();var u=E.exports;const re=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),A=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),ae=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),oe=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,s)=>new Set([...e,...s]),[])),ie=(t,e)=>{e=e||oe(t);let s=e,r=e;A(e)&&(s=e.map(a=>a.label),r=e.map(a=>a.key));const i=t.map(a=>r.map(o=>ce(o,a)));return[s,...i]},ce=(t,e)=>{const s=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(r,i,a,o){const d=r[i];if(d==null)o.splice(1);else return d},e);return s===void 0?t in e?e[t]:"":s},le=t=>typeof t>"u"||t===null?"":t,Y=(t,e=",",s='"')=>t.filter(r=>r).map(r=>r.map(i=>le(i)).map(i=>`${s}${i}${s}`).join(e)).join(`
`),de=(t,e,s,r)=>Y(e?[e,...t]:t,s,r),pe=(t,e,s,r)=>Y(ie(t,e),s,r),ue=(t,e,s,r)=>e?`${e.join(s)}
${t}`:t.replace(/"/g,'""'),N=(t,e,s,r)=>{if(A(t))return pe(t,e,s,r);if(ae(t))return de(t,e,s,r);if(typeof t=="string")return ue(t,e,s);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},P=(t,e,s,r,i)=>{const a=N(t,s,r,i),o=re()?"application/csv":"text/csv",d=new Blob([e?"\uFEFF":"",a],{type:o}),l=`data:${o};charset=utf-8,${e?"\uFEFF":""}${a}`,p=window.URL||window.webkitURL;return typeof p.createObjectURL>"u"?l:p.createObjectURL(d)},M={data:u.oneOfType([u.string,u.array,u.func]).isRequired,headers:u.array,target:u.string,separator:u.string,filename:u.string,uFEFF:u.bool,onClick:u.func,asyncOnClick:u.bool,enclosingCharacter:u.string},U={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},he={target:"_blank"};class O extends T.Component{constructor(e){super(e),this.state={}}buildURI(){return P(...arguments)}componentDidMount(){const{data:e,headers:s,separator:r,enclosingCharacter:i,uFEFF:a,target:o,specs:d,replace:l}=this.props;this.state.page=window.open(this.buildURI(e,a,s,r,i),o,d,l)}getWindow(){return this.state.page}render(){return null}}y(O,"defaultProps",Object.assign(U,he)),y(O,"propTypes",M);var v;let fe=(v=class extends T.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return P(...arguments)}handleLegacy(e,s=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:r,headers:i,separator:a,filename:o,enclosingCharacter:d,uFEFF:l}=this.props,p=s&&typeof r=="function"?r():r;let m=new Blob([l?"\uFEFF":"",N(p,i,a,d)]);return window.navigator.msSaveBlob(m,o),!1}}handleAsyncClick(e){const s=r=>{if(r===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,s)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:s,separator:r,filename:i,uFEFF:a,children:o,onClick:d,asyncOnClick:l,enclosingCharacter:p,...m}=this.props,j=typeof window>"u"?"":this.buildURI(e,a,s,r,p);return n.jsx("a",{download:i,...m,ref:C=>this.link=C,target:"_self",href:j,onClick:this.handleClick(),children:o})}},y(v,"defaultProps",U),y(v,"propTypes",M),v);const me=fe;const be=()=>{const t=V(),{user:e,explist:s,ledgerlist:r}=W(c=>c.userexplist),[i,a]=g.useState(!1),[o,d]=g.useState([]),[l,p]=g.useState({from:f().subtract(1,"month").format("YYYY-MM-DD"),to:f().format("YYYY-MM-DD"),ledger:"all"});g.useEffect(()=>{t(z(!1)),j()},[]);const m=[{label:"Ledger",key:"ledger.ledger"},{label:"Amount",key:"amount"},{label:"Date",key:"date"},{label:"Narration",key:"narration"}],x=c=>{const{name:h,value:b}=c.target;p(R=>({...R,[h]:b}))},j=()=>{a(!0);const{from:c,to:h,ledger:b}=l,R=s.filter(F=>{const D=f(F.date).isBetween(f(c).startOf("day"),f(h).endOf("day"),null,"[]");return b==="all"?D:D&&F.ledger.ledger===b});d(R)},C=()=>{a(!1),p({from:f().subtract(1,"month").format("YYYY-MM-DD"),to:f().format("YYYY-MM-DD"),ledger:"all"}),d([])},$=()=>{t(Z(!0)),setTimeout(()=>window.print(),1)},k=c=>f(c).format("DD-MMM-YY");return g.useEffect(()=>{j()},[l]),n.jsxs(H.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"report",children:[n.jsxs("div",{className:"cont",children:[n.jsxs("span",{children:[n.jsxs("span",{children:["From: ",n.jsx("input",{type:"date",name:"from",value:l.from,onChange:x})]}),n.jsxs("span",{children:["To: ",n.jsx("input",{type:"date",name:"to",value:l.to,onChange:x})]}),n.jsxs(q,{className:"ledger caps mui",size:"small",children:[n.jsx(J,{children:"Ledger"}),n.jsxs(K,{name:"ledger",label:"Ledger",value:l.ledger,onChange:x,children:[n.jsx(w,{value:"all",children:"All"}),r.map((c,h)=>n.jsx(w,{value:c.ledger,children:c.ledger},h))]})]}),n.jsx(S,{className:"muibtn",disabled:!i,variant:"contained",onClick:C,startIcon:n.jsx(G,{}),children:"Clear"})]}),n.jsxs("span",{children:[n.jsx(me,{data:o,headers:m,filename:`${e==null?void 0:e.name}-Expense-Record`,children:n.jsx(S,{className:"muibtn",size:"small",variant:"contained",startIcon:n.jsx(Q,{}),children:"CSV"})}),n.jsx(S,{className:"muibtn",size:"small",variant:"contained",onClick:$,startIcon:n.jsx(X,{}),children:"Print"})]})]}),n.jsxs("div",{className:"table",id:"printarea",children:[n.jsxs("div",{className:"head",children:[n.jsxs("b",{children:["Accusoft - ",e==null?void 0:e.name]})," (Report from ",k(l.from)," to ",k(l.to),")"]}),n.jsxs("table",{id:"tavlecontent",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.no"}),n.jsx("th",{children:"Ledger"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Narration"}),n.jsx("th",{children:"Date"})]})}),n.jsxs("tbody",{children:[o.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:n.jsx("b",{children:"No Record Found"})})}):o.map((c,h)=>n.jsxs("tr",{children:[n.jsx("td",{children:h+1}),n.jsx("td",{children:c.ledger.ledger}),n.jsx("td",{children:c.amount}),n.jsx("td",{children:c.narration}),n.jsx("td",{children:k(c.date)})]},h)),o.length>0&&n.jsxs("tr",{children:[n.jsx("td",{colSpan:2,children:n.jsx("b",{children:"Total"})}),n.jsx("td",{children:o.reduce((c,h)=>c+h.amount,0)}),n.jsx("td",{colSpan:2})]})]})]})]})]})};export{be as default};
