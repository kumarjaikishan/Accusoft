import{u as C,a as E,b as Y,r as x,s as O,j as e,m as z,F as y,I as N,S as f,M as c}from"./index-0facd82b.js";const J=()=>{const b=C(),i=E(t=>t.userexplist),p=Y(),d=new Date,g=localStorage.getItem("month"),u=localStorage.getItem("year"),[s,I]=x.useState({date:d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getUTCDate(),month:g?parseInt(g,10):d.getMonth(),year:u?parseInt(u,10):d.getFullYear()}),[m,M]=x.useState({});x.useEffect(()=>{S(),b(O(!1)),localStorage.setItem("month",s.month),localStorage.setItem("year",s.year)},[s]);let n={};const S=()=>{i.ledgerlist.forEach(l=>{n[l.ledger]=0}),n.total=0;let t=String(parseInt(s.month)+1).padStart(2,"0");const a=s.year+"-"+t+"-01",o=s.year+"-"+t+"-31";i.explist.forEach(l=>{let{ledger:r,amount:$,date:v}=l;r=r.ledger;const h=parseFloat($);isNaN(h)||v>=a&&v<=o&&(n.total+=h,n.hasOwnProperty(r)?n[r]+=h:n[r]=h)}),M(n)},D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=t=>{let a=t.target.name,o=t.target.value;I(l=>({...l,[a]:o}))},F=t=>{var l;const a=(l=i==null?void 0:i.ledgerlist)==null?void 0:l.find(r=>r.ledger===t),o=a==null?void 0:a._id;p(o?`/ledgerDetail/${o}?&ledgerName=${a.ledger}&month=${s.month}&year=${s.year}`:`/ledgerDetail/all?&ledgerName=All Ledger&month=${s.month}&year=${s.year}`)};return e.jsx(e.Fragment,{children:e.jsxs(z.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"datanalysis",children:[e.jsxs("div",{className:"cont",children:[e.jsx("span",{children:e.jsxs(y,{size:"small",className:" select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Month"}),e.jsx(f,{name:"month",labelId:"demo-simple-select-label",onChange:j,value:s.month,id:"demo-simple-select",label:"Month",children:D.map((t,a)=>e.jsx(c,{sx:{textTransform:"capitalize"},value:a,children:t},a))})]})}),e.jsx("span",{children:e.jsxs(y,{size:"small",className:"select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Year"}),e.jsxs(f,{name:"year",labelId:"demo-simple-select-label",onChange:j,value:s.year,id:"demo-simple-select",label:"Year",children:[e.jsx(c,{value:"2021",children:"2021"}),e.jsx(c,{value:"2022",children:"2022"}),e.jsx(c,{value:"2023",children:"2023"}),e.jsx(c,{value:"2024",children:"2024"}),e.jsx(c,{value:"2025",children:"2025"})]})]})})]}),e.jsx("div",{className:"cards",children:Object.entries(m).map(([t,a])=>e.jsxs("div",{onClick:()=>F(t),className:"card",id:t,children:[e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"amt",children:a}),e.jsx("div",{className:"day",children:t})]}),e.jsx("div",{className:"icon",children:e.jsx("div",{className:"cir",style:{background:`conic-gradient(#034972 ${isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)*3.6}deg,  #afbbcb  10.8deg)`},children:e.jsxs("div",{className:"per",children:[" ",isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)," %"]})})})]},t))})]})})};export{J as default};
