import{c as O,g as I,u as C,a as Y,b as w,r as j,s as z,d as f,j as e,m as J,F as y,I as N,S as b,M as h}from"./index-Bi-cYWLi.js";var M={exports:{}};(function(p,i){(function(d,s){p.exports=s()})(O,function(){return function(d,s){s.prototype.isSameOrAfter=function(n,o){return this.isSame(n,o)||this.isAfter(n,o)}}})})(M);var L=M.exports;const k=I(L);var D={exports:{}};(function(p,i){(function(d,s){p.exports=s()})(O,function(){return function(d,s){s.prototype.isSameOrBefore=function(n,o){return this.isSame(n,o)||this.isBefore(n,o)}}})})(D);var T=D.exports;const G=I(T);f.extend(k);f.extend(G);const R=()=>{const p=C(),i=Y(a=>a.userexplist),d=w(),s=new Date,n=localStorage.getItem("month"),o=localStorage.getItem("year"),[r,$]=j.useState({date:s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getUTCDate(),month:n?parseInt(n,10):s.getMonth(),year:o?parseInt(o,10):s.getFullYear()}),[x,A]=j.useState({});j.useEffect(()=>{E(),p(z(!1)),localStorage.setItem("month",r.month),localStorage.setItem("year",r.year)},[r]);const E=()=>{const a={};i.ledgerlist.forEach(l=>{a[l.ledger]=0}),a.total=0;const t=String(parseInt(r.month)+1).padStart(2,"0"),c=f(`${r.year}-${t}-01`),m=c.endOf("month");i.explist.forEach(l=>{const g=typeof l.ledger=="object"?l.ledger.ledger:l.ledger,u=parseFloat(l.amount),S=f(l.date);!isNaN(u)&&S.isSameOrAfter(c)&&S.isSameOrBefore(m)&&(a.total+=u,a.hasOwnProperty(g)?a[g]+=u:a[g]=u)}),A({...a})},F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],v=a=>{let t=a.target.name,c=a.target.value;$(m=>({...m,[t]:c}))},B=a=>{var m;const t=(m=i==null?void 0:i.ledgerlist)==null?void 0:m.find(l=>l.ledger===a),c=t==null?void 0:t._id;d(c?`/datanalysis/ledgerDetail/${c}?&ledgerName=${t.ledger}&month=${r.month}&year=${r.year}`:`/datanalysis/ledgerDetail/all?&ledgerName=All Ledger&month=${r.month}&year=${r.year}`)};return e.jsx(e.Fragment,{children:e.jsxs(J.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"datanalysis",children:[e.jsxs("div",{className:"cont",children:[e.jsx("span",{children:e.jsxs(y,{size:"small",className:" select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Month"}),e.jsx(b,{name:"month",labelId:"demo-simple-select-label",onChange:v,value:r.month,id:"demo-simple-select",label:"Month",children:F.map((a,t)=>e.jsx(h,{sx:{textTransform:"capitalize"},value:t,children:a},t))})]})}),e.jsx("span",{children:e.jsxs(y,{size:"small",className:"select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Year"}),e.jsxs(b,{name:"year",labelId:"demo-simple-select-label",onChange:v,value:r.year,id:"demo-simple-select",label:"Year",children:[e.jsx(h,{value:"2021",children:"2021"}),e.jsx(h,{value:"2022",children:"2022"}),e.jsx(h,{value:"2023",children:"2023"}),e.jsx(h,{value:"2024",children:"2024"}),e.jsx(h,{value:"2025",children:"2025"})]})]})})]}),e.jsx("div",{className:"cards",children:Object.entries(x).map(([a,t])=>e.jsxs("div",{onClick:()=>B(a),className:"card",id:a,children:[e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"amt",children:t}),e.jsx("div",{className:"day",children:a})]}),e.jsx("div",{className:"icon",children:e.jsx("div",{className:"cir",style:{background:`conic-gradient(#034972 ${isNaN(Math.floor(t/x.total*100))?0:Math.floor(t/x.total*100)*3.6}deg,  #afbbcb  10.8deg)`},children:e.jsxs("div",{className:"per",children:[" ",isNaN(Math.floor(t/x.total*100))?0:Math.floor(t/x.total*100)," %"]})})})]},a))})]})})};export{R as default};
