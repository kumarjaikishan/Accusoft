var W=Object.defineProperty;var G=(t,e,a)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var v=(t,e,a)=>(G(t,typeof e!="symbol"?e+"":e,a),a);import{p,R as O,j as r,b as D,i as R,u as Q,a as X,r as x,s as Z,m as ee,F as te,I as re,S as ae,M as E,B as k,c as ne}from"./index-d3eb8cdb.js";const se=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),M=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),le=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),ie=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,a)=>new Set([...e,...a]),[])),oe=(t,e)=>{e=e||ie(t);let a=e,n=e;M(e)&&(a=e.map(o=>o.label),n=e.map(o=>o.key));const c=t.map(o=>n.map(i=>ce(i,o)));return[a,...c]},ce=(t,e)=>{const a=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(n,c,o,i){const u=n[c];if(u==null)i.splice(1);else return u},e);return a===void 0?t in e?e[t]:"":a},de=t=>typeof t>"u"||t===null?"":t,U=(t,e=",",a='"')=>t.filter(n=>n).map(n=>n.map(c=>de(c)).map(c=>`${a}${c}${a}`).join(e)).join(`
`),ue=(t,e,a,n)=>U(e?[e,...t]:t,a,n),pe=(t,e,a,n)=>U(oe(t,e),a,n),he=(t,e,a,n)=>e?`${e.join(a)}
${t}`:t.replace(/"/g,'""'),z=(t,e,a,n)=>{if(M(t))return pe(t,e,a,n);if(le(t))return ue(t,e,a,n);if(typeof t=="string")return he(t,e,a);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},P=(t,e,a,n,c)=>{const o=z(t,a,n,c),i=se()?"application/csv":"text/csv",u=new Blob([e?"\uFEFF":"",o],{type:i}),h=`data:${i};charset=utf-8,${e?"\uFEFF":""}${o}`,f=window.URL||window.webkitURL;return typeof f.createObjectURL>"u"?h:f.createObjectURL(u)},T={data:p.oneOfType([p.string,p.array,p.func]).isRequired,headers:p.array,target:p.string,separator:p.string,filename:p.string,uFEFF:p.bool,onClick:p.func,asyncOnClick:p.bool,enclosingCharacter:p.string},V={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},fe={target:"_blank"};class A extends O.Component{constructor(e){super(e),this.state={}}buildURI(){return P(...arguments)}componentDidMount(){const{data:e,headers:a,separator:n,enclosingCharacter:c,uFEFF:o,target:i,specs:u,replace:h}=this.props;this.state.page=window.open(this.buildURI(e,o,a,n,c),i,u,h)}getWindow(){return this.state.page}render(){return null}}v(A,"defaultProps",Object.assign(V,fe)),v(A,"propTypes",T);var S;let ge=(S=class extends O.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return P(...arguments)}handleLegacy(e,a=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:n,headers:c,separator:o,filename:i,enclosingCharacter:u,uFEFF:h}=this.props,f=a&&typeof n=="function"?n():n;let m=new Blob([h?"\uFEFF":"",z(f,c,o,u)]);return window.navigator.msSaveBlob(m,i),!1}}handleAsyncClick(e){const a=n=>{if(n===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,a)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:a,separator:n,filename:c,uFEFF:o,children:i,onClick:u,asyncOnClick:h,enclosingCharacter:f,...m}=this.props,j=typeof window>"u"?"":this.buildURI(e,o,a,n,f);return r.jsx("a",{download:c,...m,ref:y=>this.link=y,target:"_self",href:j,onClick:this.handleClick(),children:i})}},v(S,"defaultProps",V),v(S,"propTypes",T),S);const me=ge;var w={},ve=R;Object.defineProperty(w,"__esModule",{value:!0});var N=w.default=void 0,xe=ve(D()),je=r,ye=(0,xe.default)((0,je.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download");N=w.default=ye;var F={},be=R;Object.defineProperty(F,"__esModule",{value:!0});var H=F.default=void 0,Se=be(D()),Ce=r,ke=(0,Se.default)((0,Ce.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");H=F.default=ke;var I={},De=R;Object.defineProperty(I,"__esModule",{value:!0});var B=I.default=void 0,Re=De(D()),we=r,Fe=(0,Re.default)((0,we.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8zm-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91z"}),"RestartAlt");B=I.default=Fe;const Le=()=>{const t=Q(),e=X(s=>s.userexplist);x.useEffect(()=>{t(Z(!1))},[]);const a=[{label:"ledger",key:"ledger.ledger"},{label:"amount",key:"amount"},{label:"date",key:"date"},{label:"narration",key:"narration"}],n=e.user.name,[c,o]=x.useState(!1),[i,u]=x.useState([]),h=new Date,f=()=>{const s=new Date;return new Date(s.setDate(s.getDate()-1))};var m=String(h.getMonth()+1).padStart(2,"0"),_=String(h.getDate()).padStart(2,"0");const j=h.getFullYear()+"-"+m+"-"+_,y=f().getFullYear()+"-"+String(f().getMonth()).padStart(2,"0")+"-"+String(f().getDate()).padStart(2,"0"),[d,$]=x.useState({from:y,to:j,ledger:"all"}),C=s=>{let l=s.target.name,g=s.target.value;$(b=>({...b,[l]:g}))},q=()=>{o(!0);let s;d.ledger=="all"?s=e.explist.filter((l,g)=>{if(l.date>=d.from&&l.date<=d.to)return l}):s=e.explist.filter((l,g)=>{if(l.date>=d.from&&l.date<=d.to&&l.ledger.ledger==d.ledger)return l}),u(s)},Y=()=>{o(!1),$({from:y,to:j,ledger:"all"})},J=()=>{t(ne(!1)),setTimeout(()=>{window.print()},1)},L=s=>{let l=new Date(s);var g=String(l.getDate()).padStart(2,"0");return g+"-"+l.toLocaleString("default",{month:"short"})+"-"+l.getFullYear().toString().substr(-2)};return x.useEffect(()=>{q(),console.log(d.ledger)},[d]),r.jsx(r.Fragment,{children:r.jsxs(ee.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"report",children:[r.jsxs("div",{className:"cont",children:[r.jsxs("span",{children:[r.jsxs("span",{children:["From: ",r.jsx("input",{value:d.from,onChange:C,type:"date",name:"from",id:""})]}),r.jsxs("span",{children:["To: ",r.jsx("input",{value:d.to,onChange:C,type:"date",name:"to",id:""})]}),r.jsxs(te,{className:"ledger caps mui",size:"small",children:[r.jsx(re,{id:"demo-simple-select-label",children:"Ledger"}),r.jsxs(ae,{name:"ledger",labelId:"demo-simple-select-label",onChange:C,value:d.ledger,defaultValue:d.ledger[1],id:"demo-simple-select",label:"Ledger",children:[r.jsx(E,{value:"all",children:"All"}),e.ledgerlist.map((s,l)=>r.jsx(E,{sx:{textTransform:"capitalize"},value:s.ledger,children:s.ledger},l))]})]}),r.jsx(k,{className:"mui",disabled:!c,title:"Clear search",variant:"contained",onClick:Y,startIcon:r.jsx(B,{}),children:"Clear"})]}),r.jsxs("span",{children:[r.jsx(me,{data:i,headers:a,filename:`${n}-Expense Record`,children:r.jsx(k,{title:"Download",size:"small",variant:"contained",startIcon:r.jsx(N,{}),children:"Csv"})}),r.jsx(k,{title:"print",size:"small",variant:"contained",onClick:J,startIcon:r.jsx(H,{}),children:"Print"})]})]}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"head",children:[" ",r.jsxs("b",{children:["Accusoft - ",e.user.name]})," (Report from ",L(d.from)," to ",L(d.to),")"]}),r.jsxs("table",{id:"tavlecontent",children:[r.jsx("thead",{id:"table",children:r.jsxs("tr",{children:[r.jsx("th",{children:"S.no"}),r.jsx("th",{children:"Ledger"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Narration"}),r.jsx("th",{children:"Date"})]})}),r.jsxs("tbody",{children:[i==null?void 0:i.map((s,l)=>{let g=new Date(s.date);var b=String(g.getDate()).padStart(2,"0");let K=b+" "+g.toLocaleString("default",{month:"short"})+", "+g.getFullYear().toString().substr(-2);return r.jsxs("tr",{children:[r.jsx("td",{children:l+1}),r.jsx("td",{children:s.ledger.ledger}),r.jsx("td",{children:s.amount}),r.jsx("td",{children:s.narration}),r.jsx("td",{children:K})]},l)}),r.jsxs("tr",{id:"foot",children:[r.jsx("td",{colSpan:2,children:"Total"}),r.jsx("td",{colSpan:1,children:i==null?void 0:i.reduce((s,l)=>s=s+l.amount,0)}),r.jsx("td",{colSpan:2})]})]})]})]})]})})};export{Le as default};
