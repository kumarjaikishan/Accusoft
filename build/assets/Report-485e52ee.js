var H=Object.defineProperty;var q=(t,e,r)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var y=(t,e,r)=>(q(t,typeof e!="symbol"?e+"":e,r),r);import{R as O,j as n,u as J,a as K,r as x,s as G,m as Q,F as X,I as Z,S as ee,M as I,B as k,V as te,b as ne,c as re,d as se}from"./index-d16dc006.js";var L={exports:{}},ae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oe=ae,ie=oe;function A(){}function N(){}N.resetWarningCache=A;var le=function(){function t(s,c,l,o,d,h){if(h!==ie){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:N,resetWarningCache:A};return r.PropTypes=r,r};L.exports=le();var m=L.exports;const ce=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),P=t=>Array.isArray(t)&&t.every(e=>typeof e=="object"&&!(e instanceof Array)),de=t=>Array.isArray(t)&&t.every(e=>Array.isArray(e)),pe=t=>Array.from(t.map(e=>Object.keys(e)).reduce((e,r)=>new Set([...e,...r]),[])),ue=(t,e)=>{e=e||pe(t);let r=e,s=e;P(e)&&(r=e.map(l=>l.label),s=e.map(l=>l.key));const c=t.map(l=>s.map(o=>he(o,l)));return[r,...c]},he=(t,e)=>{const r=t.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(s,c,l,o){const d=s[c];if(d==null)o.splice(1);else return d},e);return r===void 0?t in e?e[t]:"":r},me=t=>typeof t>"u"||t===null?"":t,U=(t,e=",",r='"')=>t.filter(s=>s).map(s=>s.map(c=>me(c)).map(c=>`${r}${c}${r}`).join(e)).join(`
`),fe=(t,e,r,s)=>U(e?[e,...t]:t,r,s),ge=(t,e,r,s)=>U(ue(t,e),r,s),ye=(t,e,r,s)=>e?`${e.join(r)}
${t}`:t.replace(/"/g,'""'),$=(t,e,r,s)=>{if(P(t))return ge(t,e,r,s);if(de(t))return fe(t,e,r,s);if(typeof t=="string")return ye(t,e,r);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},_=(t,e,r,s,c)=>{const l=$(t,r,s,c),o=ce()?"application/csv":"text/csv",d=new Blob([e?"\uFEFF":"",l],{type:o}),h=`data:${o};charset=utf-8,${e?"\uFEFF":""}${l}`,p=window.URL||window.webkitURL;return typeof p.createObjectURL>"u"?h:p.createObjectURL(d)},V={data:m.oneOfType([m.string,m.array,m.func]).isRequired,headers:m.array,target:m.string,separator:m.string,filename:m.string,uFEFF:m.bool,onClick:m.func,asyncOnClick:m.bool,enclosingCharacter:m.string},B={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},xe={target:"_blank"};class E extends O.Component{constructor(e){super(e),this.state={}}buildURI(){return _(...arguments)}componentDidMount(){const{data:e,headers:r,separator:s,enclosingCharacter:c,uFEFF:l,target:o,specs:d,replace:h}=this.props;this.state.page=window.open(this.buildURI(e,l,r,s,c),o,d,h)}getWindow(){return this.state.page}render(){return null}}y(E,"defaultProps",Object.assign(B,xe)),y(E,"propTypes",V);var v;let je=(v=class extends O.Component{constructor(e){super(e),this.buildURI=this.buildURI.bind(this)}buildURI(){return _(...arguments)}handleLegacy(e,r=!1){if(window.navigator.msSaveOrOpenBlob){e.preventDefault();const{data:s,headers:c,separator:l,filename:o,enclosingCharacter:d,uFEFF:h}=this.props,p=r&&typeof s=="function"?s():s;let g=new Blob([h?"\uFEFF":"",$(p,c,l,d)]);return window.navigator.msSaveBlob(g,o),!1}}handleAsyncClick(e){const r=s=>{if(s===!1){e.preventDefault();return}this.handleLegacy(e,!0)};this.props.onClick(e,r)}handleSyncClick(e){if(this.props.onClick(e)===!1){e.preventDefault();return}this.handleLegacy(e)}handleClick(){return e=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(e):this.handleSyncClick(e);this.handleLegacy(e)}}render(){const{data:e,headers:r,separator:s,filename:c,uFEFF:l,children:o,onClick:d,asyncOnClick:h,enclosingCharacter:p,...g}=this.props,j=typeof window>"u"?"":this.buildURI(e,l,r,s,p);return n.jsx("a",{download:c,...g,ref:b=>this.link=b,target:"_self",href:j,onClick:this.handleClick(),children:o})}},y(v,"defaultProps",B),y(v,"propTypes",V),v);const be=je,ke=()=>{var D,T;const t=J(),e=K(a=>a.userexplist);x.useEffect(()=>{t(G(!1))},[]);const r=[{label:"ledger",key:"ledger.ledger"},{label:"amount",key:"amount"},{label:"date",key:"date"},{label:"narration",key:"narration"}],s=(D=e==null?void 0:e.user)==null?void 0:D.name,[c,l]=x.useState(!1),[o,d]=x.useState([]),h=new Date,p=()=>{const a=new Date;return new Date(a.setDate(a.getDate()-1))};var g=String(h.getMonth()+1).padStart(2,"0"),F=String(h.getDate()).padStart(2,"0");const j=h.getFullYear()+"-"+g+"-"+F,b=p().getFullYear()+"-"+String(p().getMonth()).padStart(2,"0")+"-"+String(p().getDate()).padStart(2,"0"),[u,R]=x.useState({from:b,to:j,ledger:"all"}),C=a=>{let i=a.target.name,f=a.target.value;R(S=>({...S,[i]:f}))},M=()=>{l(!0);let a;u.ledger=="all"?a=e.explist.filter((i,f)=>{if(i.date>=u.from&&i.date<=u.to)return i}):a=e.explist.filter((i,f)=>{if(i.date>=u.from&&i.date<=u.to&&i.ledger.ledger==u.ledger)return i}),d(a)},W=()=>{l(!1),R({from:b,to:j,ledger:"all"})},Y=()=>{t(se(!0)),setTimeout(()=>{window.print()},1)},w=a=>{let i=new Date(a);var f=String(i.getDate()).padStart(2,"0");return f+"-"+i.toLocaleString("default",{month:"short"})+"-"+i.getFullYear().toString().substr(-2)};return x.useEffect(()=>{M()},[u]),n.jsx(n.Fragment,{children:n.jsxs(Q.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"report",children:[n.jsxs("div",{className:"cont",children:[n.jsxs("span",{children:[n.jsxs("span",{children:["From: ",n.jsx("input",{value:u.from,onChange:C,type:"date",name:"from",id:""})]}),n.jsxs("span",{children:["To: ",n.jsx("input",{value:u.to,onChange:C,type:"date",name:"to",id:""})]}),n.jsxs(X,{className:"ledger caps mui",size:"small",children:[n.jsx(Z,{id:"demo-simple-select-label",children:"Ledger"}),n.jsxs(ee,{name:"ledger",labelId:"demo-simple-select-label",onChange:C,value:u.ledger,defaultValue:u.ledger[1],id:"demo-simple-select",label:"Ledger",children:[n.jsx(I,{value:"all",children:"All"}),e.ledgerlist.map((a,i)=>n.jsx(I,{sx:{textTransform:"capitalize"},value:a.ledger,children:a.ledger},i))]})]}),n.jsx(k,{className:"muibtn",disabled:!c,title:"Clear search",variant:"contained",onClick:W,startIcon:n.jsx(te,{}),children:"Clear"})]}),n.jsxs("span",{children:[n.jsx(be,{data:o,headers:r,filename:`${s}-Expense Record`,children:n.jsx(k,{className:"muibtn",title:"Download",size:"small",variant:"contained",startIcon:n.jsx(ne,{}),children:"Csv"})}),n.jsx(k,{className:"muibtn",title:"print",size:"small",variant:"contained",onClick:Y,startIcon:n.jsx(re,{}),children:"Print"})]})]}),n.jsxs("div",{className:"table",id:"printarea",children:[n.jsxs("div",{className:"head",children:[" ",n.jsxs("b",{children:["Accusoft - ",(T=e==null?void 0:e.user)==null?void 0:T.name]})," (Report from ",w(u.from)," to ",w(u.to),")"]}),n.jsxs("table",{id:"tavlecontent",children:[n.jsx("thead",{id:"table",children:n.jsxs("tr",{children:[n.jsx("th",{children:"S.no"}),n.jsx("th",{children:"Ledger"}),n.jsx("th",{children:"Amount"}),n.jsx("th",{children:"Narration"}),n.jsx("th",{children:"Date"})]})}),n.jsxs("tbody",{children:[o.length<1&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:n.jsx("b",{children:"No Record Found"})})}),o==null?void 0:o.map((a,i)=>{let f=new Date(a.date);var S=String(f.getDate()).padStart(2,"0");let z=S+" "+f.toLocaleString("default",{month:"short"})+", "+f.getFullYear().toString().substr(-2);return n.jsxs("tr",{children:[n.jsx("td",{children:i+1}),n.jsx("td",{children:a.ledger.ledger}),n.jsx("td",{children:a.amount}),n.jsx("td",{children:a.narration}),n.jsx("td",{children:z})]},i)}),n.jsxs("tr",{id:"foot",children:[n.jsx("td",{colSpan:2,children:"Total"}),n.jsx("td",{colSpan:1,children:o==null?void 0:o.reduce((a,i)=>a=a+i.amount,0)}),n.jsx("td",{colSpan:2})]})]})]})]})]})})};export{ke as default};
