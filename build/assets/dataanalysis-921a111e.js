import{u as E,a as Y,b as $,r as x,s as O,j as e,m as z,F as v,I as N,S as y,M as o}from"./index-0b9d399c.js";const k=()=>{const f=E(),i=Y(t=>t.userexplist),b=$(),d=new Date,p=localStorage.getItem("month"),g=localStorage.getItem("year"),[s,I]=x.useState({date:d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getUTCDate(),month:p?parseInt(p,10):d.getMonth(),year:g?parseInt(g,10):d.getFullYear()}),[m,M]=x.useState({});x.useEffect(()=>{S(),f(O(!1)),localStorage.setItem("month",s.month),localStorage.setItem("year",s.year)},[s]);let n={};const S=()=>{i.ledgerlist.forEach(l=>{n[l.ledger]=0}),n.total=0;let t=String(parseInt(s.month)+1).padStart(2,"0");const a=s.year+"-"+t+"-01",c=s.year+"-"+t+"-31";i.explist.forEach(l=>{let{ledger:r,amount:C,date:j}=l;r=r.ledger;const h=parseFloat(C);isNaN(h)||j>=a&&j<=c&&(n.total+=h,n.hasOwnProperty(r)?n[r]+=h:n[r]=h)}),M(n)},D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=t=>{let a=t.target.name,c=t.target.value;I(l=>({...l,[a]:c}))},F=t=>{var l;const a=(l=i==null?void 0:i.ledgerlist)==null?void 0:l.find(r=>r.ledger===t),c=a==null?void 0:a._id;c&&b(`/ledgerDetail/${c}?&ledgerName=${a.ledger}&month=${s.month}&year=${s.year}`)};return e.jsx(e.Fragment,{children:e.jsxs(z.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"datanalysis",children:[e.jsxs("div",{className:"cont",children:[e.jsx("span",{children:e.jsxs(v,{size:"small",className:" select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Month"}),e.jsx(y,{name:"month",labelId:"demo-simple-select-label",onChange:u,value:s.month,id:"demo-simple-select",label:"Month",children:D.map((t,a)=>e.jsx(o,{sx:{textTransform:"capitalize"},value:a,children:t},a))})]})}),e.jsx("span",{children:e.jsxs(v,{size:"small",className:"select caps",children:[e.jsx(N,{id:"demo-simple-select-label",children:"Year"}),e.jsxs(y,{name:"year",labelId:"demo-simple-select-label",onChange:u,value:s.year,id:"demo-simple-select",label:"Year",children:[e.jsx(o,{value:"2021",children:"2021"}),e.jsx(o,{value:"2022",children:"2022"}),e.jsx(o,{value:"2023",children:"2023"}),e.jsx(o,{value:"2024",children:"2024"}),e.jsx(o,{value:"2025",children:"2025"})]})]})})]}),e.jsx("div",{className:"cards",children:Object.entries(m).map(([t,a])=>e.jsxs("div",{onClick:()=>F(t),className:"card",id:t,children:[e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"amt",children:a}),e.jsx("div",{className:"day",children:t})]}),e.jsx("div",{className:"icon",children:e.jsx("div",{className:"cir",style:{background:`conic-gradient(#034972 ${isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)*3.6}deg,  #afbbcb  10.8deg)`},children:e.jsxs("div",{className:"per",children:[" ",isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)," %"]})})})]},t))})]})})};export{k as default};
