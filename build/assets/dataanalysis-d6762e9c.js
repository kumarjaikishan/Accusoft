import{u as C,a as E,b as $,r as x,s as O,j as e,m as Y,F as j,I as g,S as v,M as c}from"./index-0b466266.js";const J=()=>{const N=C(),d=E(s=>s.userexplist),f=$(),o=new Date,y=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getUTCDate(),[t,b]=x.useState({date:y,month:o.getMonth(),year:o.getFullYear()}),[m,M]=x.useState({});x.useEffect(()=>{S(),N(O(!1))},[t]);let n={};const S=()=>{d.ledgerlist.forEach(l=>{n[l.ledger]=0}),n.total=0;let s=String(parseInt(t.month)+1).padStart(2,"0");const a=t.year+"-"+s+"-01",r=t.year+"-"+s+"-31";d.explist.forEach(l=>{let{ledger:i,amount:F,date:u}=l;i=i.ledger;const h=parseFloat(F);isNaN(h)||u>=a&&u<=r&&(n.total+=h,n.hasOwnProperty(i)?n[i]+=h:n[i]=h)}),M(n)},I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=s=>{let a=s.target.name,r=s.target.value;b(l=>({...l,[a]:r}))},D=s=>{var l;const a=(l=d==null?void 0:d.ledgerlist)==null?void 0:l.find(i=>i.ledger===s),r=a==null?void 0:a._id;r&&f(`/ledgerDetail/${r}?&ledgerName=${a.ledger}&month=${t.month}&year=${t.year}`)};return e.jsx(e.Fragment,{children:e.jsxs(Y.div,{initial:{opacity:0,x:"100%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"-100%"},transition:{duration:.2,ease:"easeInOut"},className:"datanalysis",children:[e.jsxs("div",{className:"cont",children:[e.jsx("span",{children:e.jsxs(j,{size:"small",className:" select caps",children:[e.jsx(g,{id:"demo-simple-select-label",children:"Month"}),e.jsx(v,{name:"month",labelId:"demo-simple-select-label",onChange:p,value:t.month,id:"demo-simple-select",label:"Month",children:I.map((s,a)=>e.jsx(c,{sx:{textTransform:"capitalize"},value:a,children:s},a))})]})}),e.jsx("span",{children:e.jsxs(j,{size:"small",className:"select caps",children:[e.jsx(g,{id:"demo-simple-select-label",children:"Year"}),e.jsxs(v,{name:"year",labelId:"demo-simple-select-label",onChange:p,value:t.year,id:"demo-simple-select",label:"Year",children:[e.jsx(c,{value:"2021",children:"2021"}),e.jsx(c,{value:"2022",children:"2022"}),e.jsx(c,{value:"2023",children:"2023"}),e.jsx(c,{value:"2024",children:"2024"}),e.jsx(c,{value:"2025",children:"2025"})]})]})})]}),e.jsx("div",{className:"cards",children:Object.entries(m).map(([s,a])=>e.jsxs("div",{onClick:()=>D(s),className:"card",id:s,children:[e.jsxs("div",{className:"data",children:[e.jsx("div",{className:"amt",children:a}),e.jsx("div",{className:"day",children:s})]}),e.jsx("div",{className:"icon",children:e.jsx("div",{className:"cir",style:{background:`conic-gradient(#034972 ${isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)*3.6}deg,  #afbbcb  10.8deg)`},children:e.jsxs("div",{className:"per",children:[" ",isNaN(Math.floor(a/m.total*100))?0:Math.floor(a/m.total*100)," %"]})})})]},s))})]})})};export{J as default};
